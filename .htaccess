# Enable Rewrite Engine
RewriteEngine On
RewriteBase /sgi/

# Force HTTPS (optional - uncomment if you want)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Clean Auth URLs
RewriteRule ^login/?$ modules/login.php [L,QSA]
RewriteRule ^register/?$ modules/register.php [L,QSA]
RewriteRule ^logout/?$ logout.php [L,QSA]
RewriteRule ^forgot-password/?$ modules/forgot-password.php [L,QSA]
RewriteRule ^reset-password/([a-zA-Z0-9]+)/?$ modules/reset-password.php?token=$1 [L,QSA]

# Dashboard URLs
RewriteRule ^dashboard/?$ modules/dashboard.php [L,QSA]
RewriteRule ^dashboard/profile/?$ modules/dashboard.php?section=profile [L,QSA]
RewriteRule ^dashboard/orders/?$ modules/dashboard.php?section=orders [L,QSA]

# Clean Order Success URLs: /order/success/1/ORD-20260209-AE5/ -> order-success.php?oid=1&order_number=ORD-20260209-AE5
RewriteRule ^order/success/([0-9]+)/([A-Z0-9\-]+)/?$ order-success.php?oid=$1&order_number=$2 [L,QSA]


RewriteRule ^order-failed/?$ order-failed.php [L,QSA]
# Clean Order URLs: /order/2IGF/ -> order.php?code=2IGF
RewriteRule ^order/([0-9]+[A-Z]+)/?$ order.php?code=$1 [L,QSA]

# Service detail pages: /buy-instagram-followers
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z0-9\-]+)$ index.php?p=$1 [L,QSA]

# API endpoints
RewriteRule ^api/(.*)$ api/$1 [L]

# Block access to sensitive files
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Prevent directory listing
Options -Indexes

# Custom error pages (optional)
# ErrorDocument 404 /sgi/404.php
# ErrorDocument 500 /sgi/500.php
